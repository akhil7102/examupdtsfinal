# Examupdt - Vercel Deployment Guide

## Prerequisites
- Vercel account
- Supabase project (already set up)
- GitHub repository (recommended)

## Environment Variables for Vercel

Since your Supabase credentials are hardcoded in `/utils/supabase/info.tsx`, you have **two deployment options**:

### Option 1: Deploy As-Is (Quickest)
Your current setup has Supabase credentials hardcoded, so you can deploy directly without any environment variables.

**Steps:**
1. Go to [Vercel Dashboard](https://vercel.com/dashboard)
2. Click "Add New Project"
3. Import your GitHub repository
4. Framework Preset: **Vite** (auto-detected)
5. Build Command: `npm run build`
6. Output Directory: `dist`
7. Install Command: `npm install`
8. Click **Deploy**

**No environment variables needed!** ✅

---

### Option 2: Use Environment Variables (Recommended for Production)

For better security, move Supabase credentials to environment variables:

#### Step 1: Update Code to Use Environment Variables

**Update `/utils/supabase/info.tsx`:**
```tsx
/* AUTOGENERATED FILE - DO NOT EDIT CONTENTS */

// Use environment variables if available, fallback to hardcoded values
export const projectId = import.meta.env.VITE_SUPABASE_PROJECT_ID || "liaoirczyteepczsiwxg"
export const publicAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY || "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxpYW9pcmN6eXRlZXBjenNpd3hnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyNTk0MzcsImV4cCI6MjA3ODgzNTQzN30.bqNtXfl3948WMHQHzJ-yj0w-nl3Etvk3LhIVASAa4SU"
```

#### Step 2: Add Environment Variables in Vercel

Go to your Vercel project → Settings → Environment Variables:

| Variable Name | Value | Environment |
|--------------|-------|-------------|
| `VITE_SUPABASE_PROJECT_ID` | `liaoirczyteepczsiwxg` | Production, Preview, Development |
| `VITE_SUPABASE_ANON_KEY` | `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxpYW9pcmN6eXRlZXBjenNpd3hnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyNTk0MzcsImV4cCI6MjA3ODgzNTQzN30.bqNtXfl3948WMHQHzJ-yj0w-nl3Etvk3LhIVASAa4SU` | Production, Preview, Development |

---

## Vercel Configuration

Create `vercel.json` in your root directory:

```json
{
  "buildCommand": "npm run build",
  "outputDirectory": "dist",
  "framework": "vite",
  "rewrites": [
    {
      "source": "/(.*)",
      "destination": "/index.html"
    }
  ]
}
```

---

## Deployment Steps

### 1. Via GitHub (Recommended)
1. Push your code to GitHub
2. Go to [Vercel Dashboard](https://vercel.com/dashboard)
3. Click "Add New Project"
4. Select your GitHub repository
5. Configure:
   - Framework Preset: **Vite**
   - Build Command: `npm run build`
   - Output Directory: `dist`
   - Install Command: `npm install`
6. Add environment variables (if using Option 2)
7. Click **Deploy**

### 2. Via Vercel CLI
```bash
# Install Vercel CLI
npm i -g vercel

# Login to Vercel
vercel login

# Deploy
vercel

# Deploy to Production
vercel --prod
```

---

## Admin Account Setup

After deployment, you need to create an admin account in Supabase:

### Method 1: Via Supabase Dashboard
1. Go to [Supabase Dashboard](https://supabase.com/dashboard)
2. Select your project: `liaoirczyteepczsiwxg`
3. Go to **Authentication** → **Users**
4. Click **Add User** → **Create new user**
5. Enter:
   - Email: `admin@examupdt.com` (or your preferred email)
   - Password: Your secure password
   - Confirm Password
6. Click **Create User**

### Method 2: Via SQL Editor
1. Go to **SQL Editor** in Supabase Dashboard
2. Run this query:
```sql
-- Create admin user
INSERT INTO auth.users (
  instance_id,
  id,
  aud,
  role,
  email,
  encrypted_password,
  email_confirmed_at,
  created_at,
  updated_at,
  confirmation_token,
  recovery_token,
  email_change_token_new,
  email_change
) VALUES (
  '00000000-0000-0000-0000-000000000000',
  gen_random_uuid(),
  'authenticated',
  'authenticated',
  'admin@examupdt.com',
  crypt('YourSecurePassword123', gen_salt('bf')),
  NOW(),
  NOW(),
  NOW(),
  '',
  '',
  '',
  ''
);
```

### Login Credentials
- URL: `https://your-domain.vercel.app/admin/login`
- Email: `admin@examupdt.com`
- Password: (the one you set above)

---

## Database Tables

Your Supabase database should have these tables (already created):
- `posts` - Notifications
- `results` - Exam Results
- `notes` - Study Notes
- `questions` - Important Questions
- `jobs` - Job Listings
- `internships` - Internship Listings
- `youtube_links` - YouTube Videos
- `contact_messages` - Contact Form Submissions

---

## Post-Deployment Checklist

### ✅ Frontend
- [ ] Site loads correctly
- [ ] All pages accessible (Home, Notifications, Results, Notes, etc.)
- [ ] Mobile responsive layout works
- [ ] Admin login page accessible at `/admin/login`

### ✅ Admin Panel
- [ ] Can login with admin credentials
- [ ] Dashboard shows correct stats
- [ ] Can create/edit/delete posts
- [ ] Can manage all content types
- [ ] File uploads work
- [ ] Preview buttons work

### ✅ Database & API
- [ ] Supabase connection works
- [ ] Data loads on all pages
- [ ] CRUD operations work
- [ ] Row Level Security (RLS) enabled
- [ ] Public access to published content
- [ ] Admin-only access to edit/delete

### ✅ Security
- [ ] Admin routes protected
- [ ] API keys not exposed in client
- [ ] CORS configured correctly
- [ ] Authentication working

---

## Custom Domain Setup

### Add Custom Domain in Vercel:
1. Go to Project Settings → **Domains**
2. Add your domain: `examupdt.com`
3. Add DNS records in your domain provider:

```
Type: A
Name: @
Value: 76.76.21.21

Type: CNAME
Name: www
Value: cname.vercel-dns.com
```

4. Wait for DNS propagation (5-10 minutes)

---

## Environment-Specific URLs

After deployment:
- **Production**: `https://examupdt.vercel.app` or your custom domain
- **Preview** (from PR): `https://examupdt-git-branch.vercel.app`
- **Development**: `http://localhost:5173`

---

## Troubleshooting

### Issue: 404 on Page Refresh
**Solution**: Already handled by `vercel.json` rewrites configuration

### Issue: Environment Variables Not Working
**Solution**: 
- Make sure variable names start with `VITE_`
- Redeploy after adding env vars
- Check Vercel → Deployments → Latest → Environment Variables

### Issue: Supabase Connection Failed
**Solution**:
- Verify project ID is correct: `liaoirczyteepczsiwxg`
- Check anon key in Supabase Dashboard → Settings → API
- Ensure Supabase project is not paused

### Issue: Admin Login Not Working
**Solution**:
- Create admin user in Supabase Dashboard (see Admin Account Setup)
- Enable Email Auth in Supabase → Authentication → Providers
- Check Supabase logs for auth errors

### Issue: Images/Files Not Loading
**Solution**:
- Check Supabase Storage buckets are public
- Verify file upload permissions
- Check CORS settings in Supabase Storage

---

## Monitoring & Analytics

### Vercel Analytics
Enable in: Project Settings → **Analytics**
- Real User Monitoring
- Web Vitals
- Traffic insights

### Supabase Logs
Monitor in: Supabase Dashboard → **Logs**
- API requests
- Database queries
- Auth events
- Storage operations

---

## Performance Optimization

### Enable in Vercel:
1. **Edge Network**: Automatic CDN
2. **Image Optimization**: Auto-optimized images
3. **Compression**: Gzip/Brotli enabled by default
4. **Caching**: Static assets cached

### Supabase Optimization:
1. Enable **Database Indexing** for frequently queried columns
2. Use **Connection Pooling** (enabled by default)
3. Monitor query performance in Dashboard

---

## Support

- **Vercel Docs**: https://vercel.com/docs
- **Supabase Docs**: https://supabase.com/docs
- **Vite Docs**: https://vitejs.dev/guide/

---

## Summary

For **production deployment**, you can:

1. **Quick Deploy** (Option 1): Deploy as-is with hardcoded credentials
2. **Secure Deploy** (Option 2): Use environment variables

Both options work perfectly. Option 2 is slightly more secure for production environments.

**Minimum required for deployment**: None! Your app is ready to deploy as-is.

**Recommended for production**:
- Use environment variables
- Create admin account in Supabase
- Add custom domain
- Enable Vercel Analytics
